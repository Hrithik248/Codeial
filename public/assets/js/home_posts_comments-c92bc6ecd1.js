let createComment=function(e){e.submit((function(t){console.log("im here"),t.preventDefault(),$.ajax({type:"post",url:"/comment/create",data:e.serialize(),success:function(e){console.log(e);let t=newCommentDom(e.data.comment,e.data.userName);$(`#post-comments-${e.data.comment.post._id}`).prepend(t),deleteComment($(" .com-del",t)),$(".comment-like",t).on("click",likeComment),new Noty({theme:"relax",text:"comment created",type:"success",layout:"topCenter",timeout:1500}).show()},error:function(e){console.log(e.responseText),new Noty({theme:"relax",text:"Error in adding comment",type:"error",layout:"topCenter",timeout:1500}).show()}})}))},newCommentDom=function(e,t){return $(`<li id="comment-${e._id}">\n            <a class="com-del" href="comment/destroy/${e._id}">X</a>\n        <p>${e.content}</p>\n        <small>${t}</small>\n        <p class="comment-likes-display" id="cld-${e._id}">\n        </p>\n        <button class="comment-like" id="cl-${e._id}">Like</button>\n        </li>`)},deleteComment=function(e){$(e).click((function(t){t.preventDefault(),console.log("in del com"),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){console.log(e),$(`#comment-${e.data.comment_id}`).remove(),new Noty({theme:"relax",text:"comment deleted",type:"success",layout:"topCenter",timeout:1500}).show()},error:function(e){console.log(e.responseText),new Noty({theme:"relax",text:"Error in deleting comment",type:"error",layout:"topCenter",timeout:1500}).show()}})}))},commentFormList=$(".new-comment-form");for(cf of commentFormList)createComment($(cf));let commentDelLinks=$(".com-del");for(cmdl of commentDelLinks)deleteComment(cmdl);